<app-loading *ngIf="loading"></app-loading>

<!-- עטיפה ראשית שמונעת גלילה לרוחב -->
<div class="container" *ngIf="!loading && menu">
  <div class="menu-scroll-container">
    <!-- אזור כותרת עם קלוריות וכפתור -->
    <div class="title-cal">

      <!-- ימין: טקסטים -->
      <div style="flex: 1;">
        <h2 class="menu-title">הנה, זה התפריט היומי שלך!</h2>
        <div class="menu-desc">כעת קבלת תפריט של 3 ארוחות ביום בתוספת תפריט נשנושים בהתאמה</div>
      </div>

      <!-- שמאל: קלוריות + כפתור -->
      <div style="display: flex; flex-direction: column; align-items: flex-start; gap: 1rem;">
        <div class="calories-box" *ngIf="remainingCalories !== null">
          קלוריות שנותרו: {{ remainingCalories }}
        </div>
        <button class="new-menu-btn" (click)="newMenu()">לתפריט חדש</button>
      </div>
      <!-- ארוחת בוקר -->
      <div class="meal-container">
        <div class="meal-title-vertical meal-title-vertical--orange">ארוחת בוקר 🍳</div>
        <div class="meal-box meal-box--orange">
          <button class="like-btn" [class.liked]="d1" (click)="onMealLike(menu.breakfast, 1)" [disabled]="d1"
            aria-label="אהבתי ארוחת בוקר">
            <svg class="heart" viewBox="0 0 24 24">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
         2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09
         C13.09 3.81 14.76 3 16.5 3
         19.58 3 22 5.42 22 8.5
         c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
            </svg>
          </button>
          <div class="meal-content">
            <div class="meal-col" *ngFor="let group of menu.breakfast">
              <div class="meal-item" *ngFor="let item of group">{{ item.name }} | {{ item.amount }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- ארוחת צהריים -->
      <div class="meal-container">
        <div class="meal-title-vertical meal-title-vertical--green">ארוחת צהריים 🍲</div>
        <div class="meal-box meal-box--green">
          <button class="like-btn" [class.liked]="d2" (click)="onMealLike(menu.lunch, 2)" [disabled]="d2"
            aria-label="אהבתי ארוחת צהריים">
            <svg class="heart" viewBox="0 0 24 24">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
         2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09
         C13.09 3.81 14.76 3 16.5 3
         19.58 3 22 5.42 22 8.5
         c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
            </svg>
          </button>
          <div class="meal-content">
            <div class="meal-col" *ngFor="let group of menu.lunch">
              <div class="meal-item" *ngFor="let item of group">{{ item.name }} | {{ item.amount }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- ארוחת ערב -->
      <div class="meal-container">
        <div class="meal-title-vertical meal-title-vertical--purple">ארוחת ערב 🥘</div>
        <div class="meal-box meal-box--purple">
          <button class="like-btn" [class.liked]="d3" (click)="onMealLike(menu.dinner, 3)" [disabled]="d3"
            aria-label="אהבתי ארוחת ערב">
            <svg class="heart" viewBox="0 0 24 24">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
         2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09
         C13.09 3.81 14.76 3 16.5 3
         19.58 3 22 5.42 22 8.5
         c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
            </svg>
          </button>
          <div class="meal-content">
            <div class="meal-col" *ngFor="let group of menu.dinner">
              <div class="meal-item" *ngFor="let item of group">{{ item.name }} | {{ item.amount }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- נשנושים -->
      <div class="meal-container">
        <div class="meal-title-vertical meal-title-vertical--pink">נשנושים 🍎</div>
        <div class="meal-box meal-box--pink">
          <button class="like-btn" [class.liked]="d4" (click)="onMealLike(menu.snacks, 4)" [disabled]="d4"
            aria-label="אהבתי נשנושים">
            <svg class="heart" viewBox="0 0 24 24">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
         2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09
         C13.09 3.81 14.76 3 16.5 3
         19.58 3 22 5.42 22 8.5
         c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
            </svg>
          </button>
          <div class="meal-content">
            <div class="meal-col" *ngFor="let group of menu.snacks">
              <div class="meal-item" *ngFor="let item of group">{{ item.name }} | {{ item.amount }}</div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>